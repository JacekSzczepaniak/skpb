<!DOCTYPE html>
<html  lang="pl">
    <head>



        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>





        <meta charset="utf-8" />
        <!--css-->
        <link href="node_modules/bootstrap/dist/css/bootstrap.css" rel="stylesheet" type="text/css"/>
        <link href="node_modules/bootstrap/dist/css/bootstrap-grid.css" rel="stylesheet" type="text/css"/>
        <link href="node_modules/bootstrap/dist/css/bootstrap-reboot.css" rel="stylesheet" type="text/css"/>

        <link href="node_modules/jquery-ui-dist/jquery-ui.css" rel="stylesheet" type="text/css">
        <link href="node_modules/jquery-ui-dist/jquery-ui.theme.css" rel="stylesheet" type="text/css">

        <link href="css/main.css" rel="stylesheet" type="text/css">

        <!--        js-->
        <script src="node_modules/jquery/dist/jquery.js" type="text/javascript"></script>
        <script src="node_modules/jquery-ui-dist/jquery-ui.js" type="text/javascript"></script>
        <script src="node_modules/bootstrap/dist/js/bootstrap.js" type="text/javascript"></script>
        <script src="node_modules/bootstrap/dist/js/bootstrap.bundle.js" type="text/javascript"></script>
        <script src="js/question.js" type="text/javascript"></script>
        <script src="node_modules/lockr/lockr.js" type="text/javascript"></script>
        <!--        <script src="js/szlak-test.js" type="text/javascript"></script>-->

        <style>
            * {box-sizing: border-box}

            /*            .container {
                            width: 100%;
                            
                           
                        }*/

            #bar {
                text-align: right;
                padding-right: 20px;
                line-height: 40px;
                color: white;
            }

        </style>



    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div class ="col-sm-12">
                    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
                        <!-- Brand -->
                        <a class="navbar-brand" href="#">Przewodnik Górski</a>

                        <!-- Links -->
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Strona Domowa</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="#">Ustawienia</a>
                            </li>

                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                    Statystyki
                                </a>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" href="statystyki.html">Quiz</a>
                                    <a class="dropdown-item" href="#">Test szlaków</a>


                                </div>
                            </li>




                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                                    Linki
                                </a>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" href="#">Quiz pytania egzaminacyjne</a>
                                    <a class="dropdown-item" href="#">Test szlaków</a>
                                    <a class="dropdown-item" href="#">Nauka szlaków</a>
                                    <a class="dropdown-item" href="#">Graniówka bieszczad</a>

                                </div>
                            </li>

                        </ul>
                    </nav>

                </div></div>

            <div class="row">
                <div class="col-sm-1"></div>
                <div class="col-sm-10">
                    <div class="alert alert-info h2">Wybierz następny w kolejności</div>
                </div>

                <div class="col-sm-1">

                </div></div>
            <div class="row">
                <div class="col-sm-10"></div>
                <div class="col-sm-2">
                    <div class="dropdown">
                        <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown">
                            Wybierz Szlak
                        </button>
                        <div class="dropdown-menu">
                            <!--                                    <a class="dropdown-item" id="all"> wszystko </a>-->
                            <a class="dropdown-item menu" id="gsb-bs">Beskid Sądecki</a>
                            <a class="dropdown-item menu" id="gsb-bn">Beskid Niski</a>

                            <a class="dropdown-item menu" id="gsb-b">Bieszczady</a>
                            <a class="dropdown-item menu" id="N-pd">Niebieski -p. Dynowskie</a>
                            <a class="dropdown-item menu" id="N-pp">Niebieski -p. Przemyskie</a>

                            <a class="dropdown-item menu" id="N-gst">Niebieski - Sanocko Turczańskie</a>
                            <a class="dropdown-item menu" id="N-bz">Niebieski - Bieszczady</a>
                        </div>
                    </div>
                </div>


            </div>
            <!--
                        <div class="panel panel-default">
                            <div class="panel-heading">szlak prowadzi przez... <span class=""></span></div>
                            <div id="kontenerOk" class="panel-body"></div>
                        </div>
            
                        
                        <div class="panel panel-default">
                            <div class="panel-heading">wybierz<span class=""></span></div>
                            <div id="kontener" class="panel-body"></div>
                            
                            
                        </div>-->

            <!--            <div class="row">
                            <div class ="col-sm-1"></div>   
                            <div class ="col-sm-10">
                                <div class="card bg-primary text-white">
                                    <div class=" badge count-ok alert-success right"><div id="kontenerOk" class="panel-body"></div></div>
                                    
                                </div>
                                <div style="padding-top:1%"></div>
                                <div class="card bg-primary text-white">
                                    <div class=" badge count-err alert-danger"><div id="kontener" class="panel-body"></div></div>
                                </div>
                                <div style="padding-top:1%"></div>
            
                                <div class ="col-sm-1"></div>
                            </div>       
            
                        </div>-->

            <div class="row">
                <div class="col-sm-1"></div>
                <div class="col-sm-10">szlak prowadzi przez... <span class="badge count-ok alert-success right">0</span></div>
                <div class="col-sm-1"></div>
            </div>
            <div class="row">
                <div class="col-sm-1"></div>
                <div class="card col-sm-10">
                    <div id="kontenerOk" class="card-body"></div>
                </div>
                <div class="col-sm-1"></div>
            </div>

            <div class="row">
                <div class="col-sm-1"></div>
                <div class="col-sm-10">wybierz<span class="badge count-err alert-danger">0</span></div>
                <div class="col-sm-1"></div>
            </div>



            <div class="row">
                <div class="col-sm-1"></div>
                <div class="card col-sm-10">
                    <div id="kontener" class="card-body"></div>
                </div>
                <div class="col-sm-1"></div>
            </div>

            <button type="button" onclick="zapisz()">
                Zapisz
            </button>


            <!--            
                        <div class="modal fade" tabindex="-1" id="summary" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title">Koniec testu</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p>Test zakończony <span class="test-info"></span></p>
                                        <p>Poprawne odpowiedzi<span class="badge count-ok alert-success right">0</span> Błędne Odpowiedzi <span class="badge count-err alert-danger">0</span></p>
                                                                <button  >Zapisz wynik</button>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-warning koniec" data-dismiss="modal">Zamknij</button>
                                        <button type="button" onclick="zapisz()" class="btn btn-success koniec" data-dismiss="modal">Zamknij i zapisz wynik</button>
                                    </div>
                                </div>
                            </div>
                        </div>-->






            <!--            <div class="card">
                            <div class="panel-heading"></div>
                            <div id="kontenerOk" class="panel-body"></div>
                        </div>
            
                        <div class="card">
                            <div class="panel-heading"></div>
            
                        </div>-->





    </body>
    <script>
        $(function () {
            var question;
            var source;
            var correct = 1;
            var error = 0;
            $.getJSON("js/szlak-gsb.json", function (json) {
                question = source = json;
                //run();
            });

            run = function () {
                $("#kontener").empty();
                $("#kontenerOk").empty();
                correct = 1;
                error = 0;
                $(".count-ok").html(correct);
                $(".count-err").html(error);

                ;
                var btn = [];

                $(question).each(function (a, b) {
                    var miejsce = b.miejsce;
                    var res = miejsce.match(/([a-z_]{0,100}.svg)/ig);
                    $(res).each(function (a, b) {
                        miejsce = miejsce.replace(b, '');
                    });
                    btn.push('<span class="badge sprawdz" data-id="' + a + '" id="btn' + a + '">' + miejsce + '</span>');
                });

                $("#kontenerOk").append(btn.shift());

                // przemieszac tablice
                shuffle(btn);

                //dodac
                $(btn).each(function () {
                    $("#kontener").append(this);
                });

            }
            var x = 0;
            $('body').delegate('.sprawdz', 'click', function () {
                dtId = $(this).data('id');
                id = "btn" + dtId;
                $('#kontener').remove(id);
                if (dtId == start + 1) {
                    $("#kontenerOk").append(this);
                    ++start;
                    ++correct;
                    $(".count-ok").html(correct);
                    window.corr = correct;

                } else {
                    ++error;
                    $(".count-err").html(error);
                    window.err = error;

                }

            });

            var x = window.x;

            $('body').delegate('.menu', 'click', function () {
                var id = $(this).prop('id');
                if (id == 'all') {
                    return void(0);
                }
                question = [];
                $(source).each(function () {
                    if (this.id_szlaku == id) {
                        question.push(this);
                    }
                });
                start = 0;
                run();
                return void(0);
            });

            function shuffle(array) {
                var currentIndex = array.length, temporaryValue, randomIndex;

                // While there remain elements to shuffle...
                while (0 !== currentIndex) {

                    // Pick a remaining element...
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex -= 1;

                    // And swap it with the current element.
                    temporaryValue = array[currentIndex];
                    array[currentIndex] = array[randomIndex];
                    array[randomIndex] = temporaryValue;
                }

                return array;
            }


        });

        // Nazwy miesięcy
        var nazwy_mies = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj',
            'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik',
            'Listopad', 'Grudzień'];

        // Odczytanie bieżącej daty i czasu, i rozbicie ich na składowe
        var data = new Date();
        var rok = data.getFullYear();
        var mies = data.getMonth();
        var dzien = data.getDate();
        var godz = data.getHours();
        var min = data.getMinutes();
        var sec = data.getSeconds();

        // Dodanie zera na początku minut i sekund jeżeli trzeba
        if (min < 10)
            min = '0' + min;
        if (sec < 10)
            sec = '0' + sec;

        // Utworzenie odpowiednio sformatowanej daty i czasu
        var data_i_czas = dzien + ' ' + nazwy_mies[mies] + ' ' + rok
                + ', ' + godz + ':' + min + ':' + sec;

        var czas = godz + ':' + min + ':' + sec;
        var data = dzien + ' ' + nazwy_mies[mies] + ' ' + rok;


        function zapisz() {

            var xxx = window.corr + window.err;
//            window.alert(xxx);
            var pp = window.corr * 100 / xxx;
//            window.alert(ppp + "%");

            var ppp = (pp.toFixed(2))
            var sss = ppp + " %";

            var statystykas = Lockr.set('test szlak' + data_i_czas, [{date: data}, {czas: czas}, {score: window.corr}, {neg: window.err}, {name: "Szlak"}, {procent: sss}]);
        }



    </script>



</html> 

